<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Backend EJS Create Task</title>
        <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    </head>

    <body class="min-h-screen bg-gradient-to-br from-gray-900 via-zinc-900 to-black text-white p-2 sm:p-4">
        <div class="main w-full flex flex-col md:flex-row md:justify-around gap-4 md:gap-6">
            <!-- Form -->
            <div
                class="form w-full md:w-1/2 bg-zinc-800/90 backdrop-blur-sm p-4 sm:p-6 rounded-xl shadow-2xl border border-zinc-700/50">
                <h2 class="text-2xl sm:text-3xl font-bold mb-6 text-center text-blue-300">Create a Task</h2>
                <form action="/create" method="post" class="space-y-4 sm:space-y-5">
                    <input type="text" name="title" id="title" placeholder="Task Title"
                        class="w-full p-2 sm:p-3 bg-zinc-900/50 text-white rounded-lg border border-zinc-600/50 focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder-zinc-400 transition-all duration-200 text-sm sm:text-base">
                    <textarea name="details" id="details" placeholder="Write Task Details Here"
                        class="w-full p-2 sm:p-3 bg-zinc-900/50 text-white rounded-lg border border-zinc-600/50 focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder-zinc-400 min-h-[200px] sm:min-h-[450px] resize-none transition-all duration-200 text-sm sm:text-base"></textarea>
                    <input type="submit" value="Add Task"
                        class="w-full p-2 sm:p-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 font-semibold cursor-pointer shadow-md text-sm sm:text-base">
                </form>
            </div>

            <!-- Tasks Card -->
            <div
                class="tasks w-full md:w-1/2 p-4 bg-zinc-800/90 rounded-xl shadow-2xl border border-zinc-700/50 text-white transition-all duration-300 hover:shadow-blue-900/20">
                <h2
                    class="text-2xl sm:text-3xl font-bold text-center text-blue-300 sticky top-0 bg-zinc-800/90 z-10 py-2">
                    Task List
                </h2>
                <div
                    class="space-y-3 mt-6 overflow-y-auto max-h-[calc(100vh-8rem)] sm:max-h-[calc(100vh-10rem)] [scrollbar-width:none] [-ms-overflow-style:none] [&::-webkit-scrollbar]:hidden">
                    <% if (files.length> 0) { %>
                        <% files.forEach(element=> { %>
                            <div
                                class="w-full bg-gray-700 h-20 sm:h-24 p-2 rounded-lg font-medium flex flex-col items-center text-center justify-between">
                                <h2 class="text-lg sm:text-xl">
                                    <%= element.replace('.txt', '' ) %>
                                </h2>
                                <div class="text-end w-full flex justify-end gap-3">
                                    <!-- Read More Button -->
                                    <a href="/read/files/<%= element %>"
                                        class="text-xs sm:text-sm font-sans text-blue-300">Read More</a>

                                    <!-- Edit Button -->
                                    <a href="/edit/files/<%= element %>" title="Edit">
                                        <svg xmlns="http://www.w3.org/2000/svg"
                                            class="h-4 w-4 sm:h-5 sm:w-5 text-yellow-400 hover:text-yellow-300 transition-colors"
                                            fill="none" viewBox="0 0 24 24" stroke="white">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M15.232 5.232l3.536 3.536M9 13l6-6 3 3-6 6H9v-3zM16 7l1 1M4 20h16" />
                                        </svg>
                                    </a>

                                    <!-- Delete Button -->
                                    <a href="#" onclick="deleteTask('<%= encodeURIComponent(element) %>')" title="Delete">
                                        <svg xmlns="http://www.w3.org/2000/svg" height="18" width="16"
                                            viewBox="0 0 512 512">
                                            <path
                                                d="M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320"
                                                fill="red" stroke="currentColor" stroke-linecap="round"
                                                stroke-linejoin="round" stroke-width="32" />
                                            <path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10"
                                                stroke-width="32" d="M80 112h352" />
                                            <path
                                                d="M192 112V72h0a23.93 23.93 0 0124-24h80a23.93 23.93 0 0124 24h0v40M256 176v224M184 176l8 224M328 176l-8 224"
                                                fill="red" stroke="currentColor" stroke-linecap="round"
                                                stroke-linejoin="round" stroke-width="32" />
                                        </svg>
                                    </a>
                                </div>
                            </div>
                            <% }) %>
                                <% } else { %>
                                    <h4
                                        class="text-xl sm:text-3xl text-gray-400 font-bold flex justify-center items-center min-h-[calc(100vh-8rem)] sm:min-h-[calc(100vh-10rem)]">
                                        No task yet
                                    </h4>
                                    <% } %>
                </div>
            </div>


        </div>

        <script src="/javascripts/script.js"></script>
    </body>

</html>